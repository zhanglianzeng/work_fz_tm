/******************************************************************************
*  Name: sys_if.c
*  Description:
*  Project: INFO4 11inch
*  Auther: fangsong
*  MCU: atmel samda1j16b
*  Comment:
******************************************************************************/
#include "../../config.h"
#include "../../../Device/samc21n18a.h"
#include "sys_if.h"
/**********************************************************************************************
* External objectsjjn
**********************************************************************************************/

/**********************************************************************************************
* Global variables
**********************************************************************************************/

/**********************************************************************************************
* Constants and macros
**********************************************************************************************/

/**********************************************************************************************
* Local types
**********************************************************************************************/

/**********************************************************************************************
* Local variables
**********************************************************************************************/

/**********************************************************************************************
* Local functions
**********************************************************************************************/

/**********************************************************************************************
* Global functions
**********************************************************************************************/

/*=====================================================================================================================
* Upward trac.:        MIDDLE/SLEEP/SLEEP_IF
* Method      :        Sys_If_Reset(void)
* Visibility  :        public
* Description :        enable software reset 
* Parameters  :
* ---------------------------------------------------------------------------------------------------------------------
*     Type      | Name(Direction) |                                      Description
* ---------------------------------------------------------------------------------------------------------------------
* Status_Ref  | Status   | Status reference
* ---------------------------------------------------------------------------------------------------------------------
* Return type :  void 
* ===================================================================================================================*/
void Sys_If_Reset(void)
{
    NVIC_SystemReset();
}

/*=====================================================================================================================
* Upward trac.:        MIDDLE/SLEEP/SLEEP_IF
* Method      :        Sys_If_IsWatchdog(void)
* Visibility  :        public
* Description :        check watchdog reset
* Parameters  :
* ---------------------------------------------------------------------------------------------------------------------
*     Type      | Name(Direction) |                                      Description
* ---------------------------------------------------------------------------------------------------------------------
* Status_Ref  | Status   | Status reference
* ---------------------------------------------------------------------------------------------------------------------
* Return type :  bool 
* ===================================================================================================================*/
bool Sys_If_IsWatchdog(void)
{
    return (bool)(RSTC->RCAUSE.reg & RSTC_RCAUSE_WDT); /*return watch dog whether reset, if reset, return 1, or else 0*/
}

/*=====================================================================================================================
* Upward trac.:        MIDDLE/SLEEP/SLEEP_IF
* Method      :        Sys_If_IsSWR(void)
* Visibility  :        public
* Description :        check software reset
* Parameters  :
* ---------------------------------------------------------------------------------------------------------------------
*     Type      | Name(Direction) |                                      Description
* ---------------------------------------------------------------------------------------------------------------------
* Status_Ref  | Status   | Status reference
* ---------------------------------------------------------------------------------------------------------------------
* Return type :  bool 
* ===================================================================================================================*/
bool Sys_If_IsSWR(void)
{
    return (bool)(RSTC->RCAUSE.reg & RSTC_RCAUSE_SYST); /*return software whether reset, if reset, return 1, or else 0*/
}

/*=====================================================================================================================
* Upward trac.:        MIDDLE/SLEEP/SLEEP_IF
* Method      :        Sys_If_IsBOD(void)
* Visibility  :        public
* Description :        check abnormal voltage reset
* Parameters  :
* ---------------------------------------------------------------------------------------------------------------------
*     Type      | Name(Direction) |                                      Description
* ---------------------------------------------------------------------------------------------------------------------
* Status_Ref  | Status   | Status reference
* ---------------------------------------------------------------------------------------------------------------------
* Return type :  bool 
* ===================================================================================================================*/
bool Sys_If_IsBOD(void)
{
    return (bool)(RSTC->RCAUSE.reg & (RSTC_RCAUSE_BODVDD | RSTC_RCAUSE_BODCORE)); /*return abnormal voltage whether reset, if reset, return 1, or else 0*/
}

/*=====================================================================================================================
* Upward trac.:        MIDDLE/SLEEP/SLEEP_IF
* Method      :        Sys_If_IsHWR(void)
* Visibility  :        public
* Description :        check hardware reset
* Parameters  :
* ---------------------------------------------------------------------------------------------------------------------
*     Type      | Name(Direction) |                                      Description
* ---------------------------------------------------------------------------------------------------------------------
* Status_Ref  | Status   | Status reference
* ---------------------------------------------------------------------------------------------------------------------
* Return type :  bool 
* ===================================================================================================================*/
bool Sys_If_IsHWR(void)
{
    return (bool)(RSTC->RCAUSE.reg & RSTC_RCAUSE_EXT); /*return hardware whether reset, if reset, return 1, or else 0*/
}
